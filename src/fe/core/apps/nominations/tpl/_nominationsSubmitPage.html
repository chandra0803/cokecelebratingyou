<!-- ======== NOMINATIONS SUBMIT PAGE ======== -->
<div id="nominationsSubmitPageView" class="page-content nominationsSubmitEdit">
    <div class="promotionWrapper">
        <div class="row-fluid">
            <div class="span12">
                <!-- **************************************************************
                    CHANGE PROMOTION
                 ***************************************************************** -->
                <div class="promotionSection" id="nominationPromoSection">

                    <div class="promotionList control-group">
                        <!-- Generated content from promotionsListTpl -->
                    </div>

                     <!-- promotions name view template -->
                    <script id="promotionNameTpl" type="text/x-handlebars-template">
                        <div class="controls promoChangeWrapper">
                            <span class="nominationPromotionName">{{promotion.name}}</span>

                            {{#gte totalPromotionCount 2}}
                            <button type="button" id="nominationChangePromoBtn" class="btn btn-primary">Change</button>
                            {{/gte}}

                            {{#if promotion.rulesText}}
                            <a href="#" class="doViewRules">View Rules</a>
                            {{/if}}
                        </div><!-- /.promoChangeWrapper -->
                    </script><!-- /#promotionsListTpl -->

                    <!-- promotions list client side template -->
                    <script id="promotionsListTpl" type="text/x-handlebars-template">
                        <div class="controls promoWrapper">
                            <select id="promotionId" name="promotionId">
                                <option class="defaultOption" value="">Choose Promotion</option>
                                {{#each this}}
                                    <option value="{{promoId}}">
                                        {{name}}
                                    </option>
                                {{/each}}
                            </select>
                        </div><!-- /.promoWrapper -->
                    </script><!-- /#promotionsListTpl -->

                    <div id="rulesModal" class="modal hide fade">
                        <div class="modal-header">
                            <button data-dismiss="modal" class="close" type="button">
                                <i class="icon-close"></i>
                            </button>
                            <h3>Rules</h3>
                        </div>
                        <div class="modal-body">
                            <!-- dynamic -->
                        </div>
                    </div><!-- /#rulesModal -->

                    <div class="promoChangeConfirmDialog" style="display:none">
                        <p>
                            <b>Change the promotion?</b>
                        </p>
                        <p>
                            Your current selections and entries will be lost.
                        </p>
                        <p class="tc">
                            <button id="nominationChangePromoConfirmBtn" class="btn btn-primary">Yes</button>
                            <button id="nominationChangePromoCancelBtn" class="btn">Cancel</button>
                        </p>
                    </div><!-- /.promoChangeConfirmDialog -->
                </div><!-- /#nominationPromoSection -->

                <div class="nominationOrgSection">
                    <div class="orgUnitList">
                        <!-- Generated content from orgUnitListTpl -->
                    </div>

                    <!-- promotions list client side template -->
                    <script id="orgUnitListTpl" type="text/x-handlebars-template">
                        {{#unless nodes.[1]}}
                            <span class="singleNodeId" data-id="{{nodes.[0].id}}">&nbsp;</span>
                        {{else}}
                        <div class="control-group validateme"
                            data-validate-flags="nonempty"
                            data-validate-fail-msgs='{"nonempty" : "You must select an org unit for reporting"}'>
                            <div class="controls orgUnitWrapper">
                                <label for="nodeId">Select Org Unit for Reporting</label>
                                <select id="nodeId" name="nodeId">
                                    <option class="defaultOption" value="">Choose one</option>
                                    {{#each nodes}}
                                        <option value="{{id}}" {{#if selected}}selected="selected"{{/if}}>
                                            {{name}}
                                        </option>
                                    {{/each}}
                                </select>
                            </div><!-- /.orgUnitWrapper -->
                        </div>
                        {{/unless}}
                    </script><!-- /#promotionsListTpl -->
                </div><!--/.nominationOrgSection-->
            </div>
        </div><!--./row-fluid-->
    </div><!--/.promotionWrapper-->


    <div class="row-fluid">
        <div class="span12">

            <!-- JAVA NOTE: in the rare event that the server has an error (FE should catch all errors) -->
            <!--div class="alert alert-block alert-error">
                <button type="button" class="close" data-dismiss="alert">Ã—</button>
                <div class="error">
                    <h4>The following errors occurred:</h4>
                    <ul>
                        <li>Owner must be selected</li>
                        <li>Date for recipient send is not a date. Date must follow the format MM/DD/YYYY.</li>
                    </ul>
                </div>
            </div-->

            <div class="wizardTabsVerticalContainer fl">

                <!-- **************************************************************
                    WIZARD TABS VERTICAL
                 ***************************************************************** -->
                <div class="wizardTabsVerticalView" data-content=".wizardTabsContent">
                    <!-- generated using json+tpl by WizardTabsVerticalView -->
                </div><!-- /.wizardTabsVerticalView -->

                <!-- **************************************************************
                    WIZARD TABS VERICAL CONTENT
                 ***************************************************************** -->
                 <!--After the template loads we move the stepContent from here and place it under the matching stepTab inside .wizardTabsVerticalView so the flow matches creative -->
                <div class="wizardTabsVertContent">
                    <!-- **************************************************************
                        NOMINEE
                    ************************************************************** -->
                    <div id="nominationsTabNomineeView" class="stepNomineeContent stepContent" style="display:none">
                    </div>


                    <!-- **************************************************************
                        BEHAVIORS
                    ************************************************************** -->
                    <div id="nominationsTabBehaviorView" class="stepBehaviorContent stepContent" style="display:none">


                    </div>

                    <!-- **************************************************************
                        ECARD
                    ************************************************************** -->
                    <div id="nominationsTabEcardView" class="stepEcardContent stepContent" style="display:none">


                    </div>

                    <!-- **************************************************************
                        WHY
                    ************************************************************** -->
                    <div id="nominationsTabWhyView" class="stepWhyContent stepContent" style="display:none">

                    </div><!-- /#nominationsTabWhyView-->
                </div><!-- /.wizardTabsVertContent-->

                <!-- VALIDATION MSGS - informational tooltip for validation -->
                <div class="errorTipWrapper" style="display:none">
                    <div class="errorTip">

                        <!-- display for validateme generic errors -->
                        <div class="errorMsg msgGenericError">
                            <i class="icon-exclamation-sign"></i>
                            Please correct the error(s).
                        </div>

                        <!-- Nominee errors -->
                        <div class="errorMsg msgNoParticipants">
                            <i class="icon-exclamation-sign"></i>
                            You must add at least one participant.
                        </div>

                        <div class="errorMsg msgTeamName">
                            <i class="icon-exclamation-sign"></i>
                            You must enter a team name.
                        </div>

                        <div class="errorMsg msgNoAward">
                            <i class="icon-exclamation-sign"></i>
                            You must enter an award amount for each participant.
                        </div>

                        <div class="errorMsg msgIndividualPax">
                            <i class="icon-exclamation-sign"></i>
                            You can only selet one participant for individual nomination.
                        </div>

                        <div class="errorMsg maxParticipantsReached">
                            <i class="icon-exclamation-sign"></i>
                            You have reached the maximun participants allowed.
                        </div>

                        <div class="errorMsg maxParticipantsGroup">
                            <i class="icon-exclamation-sign"></i>
                            Group exceeds the max participants allowed.
                        </div>

                         <div class="errorMsg awardOutOfRange">
                            <i class="icon-exclamation-sign"></i>
                            Award value out of range.
                        </div>

                        <div class="errorMsg msgGroupName">
                            <i class="icon-exclamation-sign"></i>
                            Group name must be unique.
                        </div>

                        <!-- Behavior errors -->
                        <div class="errorMsg msgNoBehaviors">
                            <i class="icon-exclamation-sign"></i>
                            You must choose at least one behavior.
                        </div>
                        <!-- eCard Errors -->
                        <div class="errorMsg msgNoECard">
                            <i class="icon-exclamation-sign"></i>
                            You must make a selection.
                        </div>
                    </div><!-- /.errorTip -->
                </div><!-- /.errorTipWrapper -->

                <!-- modal to catch errors from server on submit OR save draft -->
                <div class="modal hide fade nomsErrorsModal">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="icon-close"></i></button>
                        <h3>
                            <i class="icon-exclamation-sign"></i>
                            Error(s) encountered
                        </h3>
                    </div>
                    <div class="modal-body">
                        <ul class="errorsList">
                            <!-- dynamic -->
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <a href="#" class="btn" data-dismiss="modal">Close</a>
                    </div>
                </div><!-- /.nomsErrorsModal -->

                <div class="cancelNominationPopover" style="display:none">
                    <p>
                        <b>Cancel Nomination?</b>
                    </p>
                    <p>
                        Selecting 'Yes' will delete this nomination. Are you sure you wish to cancel?
                    </p>
                    <p class="tc">
                        <button href="ajax/serverCommand_redirect.json" id="nominationCancelConfirmBtn" class="btn btn-primary">Yes</button>
                        <button id="nominationDoNotCancelBtn" class="btn">No</button>
                    </p>
                </div><!-- /.cancelNominationPopover -->

                <!-- modal after successfully submitting a nomination -->
                <div class="modal hide fade nominationSubmittedModal tc" data-backdrop="static">
                    <div class="modal-header">
                        <h3>
                           Nomination submitted!
                        </h3>
                    </div>
                    <div class="modal-body">
                        <p>Some text here.</p>

                        <a href="layout.html" class="btn btn-primary">Home</a>
                    </div>
                </div><!-- /.nomsErrorsModal -->

                <script id="selectGroupTpl" type="text/x-handlebars-template">
                    <div class="selectGroupSection">
                        <div class="control-group">
                            <select name="selectGroup" id="selectGroup" {{#unless this}}readonly="readonly" disabled{{/unless}}>
                                <option value="" class="defaultOption">Select From My Goups</option>
                            {{#each this}}
                                <option value="{{id}}" data-pax-count="{{paxCount}}" {{#if selected}}selected="selected"{{/if}}>{{name}}</option>
                            {{/each}}
                            </select>

                            {{#unless this}}
                                <span>No Groups Saved</span>
                            {{/unless}}
                        </div>
                    </div>
                </script>

            </div><!-- /.wizardTabsVerticalContainer-->
        </div>
    </div>

</div><!--/#nominationsSubmitPageView-->

<!-- Instantiate the PageView - this goes here as it expresses the DOM element the PageView is getting attached to -->
<script>
/* jshint ignore:start */
$(document).ready(function() {

    var idJson = {
        promotionId: 1234,
        claimId: 12345
    }

    //attach the view to an existing DOM element
    var npsv = new NominationsSubmitPageView({
        el:$('#nominationsSubmitPageView'),
        pageNav : {
            back : {
                text : 'Back',
                url : 'layout.html'
            },
            home : {
                text : 'Home',
                url : 'layout.html?tplPath=base/tpl/&amp;tpl=modulesPage.html'
            }
        },
        pageTitle : 'Submit a Nominee',
        idJson: idJson
    });

});
/* jshint ignore:end */
</script>
