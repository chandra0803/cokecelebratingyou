<!-- ======== SSI MODULE ======== -->
{{! NOTE: 'contestType', 'activity', and 'leader' are set in the js }}

<div class="module-topper {{contestType}}">
    {{#eq contestType "objectives"}}
        <h4><i class="type-icon icon-g5-ssi-objectives objectives"></i> Objectives Contests</h4>
    {{/eq}}
    {{#eq contestType "stepItUp"}}
        <h4><i class="type-icon icon-g5-ssi-stepItUp stepItUp"></i> Step It Up Contests</h4>
    {{/eq}}
    {{#eq contestType "doThisGetThat"}}
        <h4><i class="type-icon icon-g5-ssi-doThisGetThat doThisGetThat"></i> Do This, Get That Contests</h4>
    {{/eq}}
    {{#eq contestType "stackRank"}}
        <h4><i class="type-icon icon-g5-ssi-stackRank stackRank"></i> Stack Rank Contests</h4>
    {{/eq}}
</div>

<div class="contestListWrap scrollArea">
    <ul class="contestList unstyled">
        {{#each contests}}
            <li class="contestListItem">
                <div class="row-fluid">
                    <div class="span12 contestInfo">
                        <h5 class="contestName">{{name}}</h5>
                        <p class="contestAsOf">
                        {{#eq status "pending"}}
                            Starts {{startDate}}
                        {{else}}
                            as of {{updatedOnDate}}
                        {{/eq}}
                        </p>
                    </div>
                </div>

                <div class="row-fluid">
                    {{#eq contestType "objectives"}}
                        <!--<div class="narrowModule">
                            <div class="span6 activityAchieved">
                                <span>Activity: {{progress}}</span>
                            </div>
                            <div class="span6 text-right">
                                <a class="btn btn-primary" href="{{creatorDetailPageUrl}}&id={{id}}">
                                    {{#eq status "finalize_results"}}
                                        Final Results
                                    {{else}}
                                        View Details
                                    {{/eq}}
                                </a>
                            </div>
                        </div>-->
                        <div class="shortAndWideModule wideModule">
                            <div class="span8 activityAchieved">
                                {{#if participantsCount}}
                                <span>
                                    <strong>Activity:</strong> {{progress}}
                                    <span class="participantEarned">
                                        <em>{{achievedParticipantsCount}} of {{participantsCount}}</em> Achieved
                                    </span>
                                </span>
                                {{/if}}
                            </div>
                            <div class="span4 text-right">
                                <a class="btn btn-primary" href="{{creatorDetailPageUrl}}&id={{id}}">
                                    {{#eq status "finalize_results"}}
                                        Final Results
                                    {{else}}
                                        View Details
                                    {{/eq}}
                                </a>
                            </div>
                        </div>
                    {{/eq}}
                    {{#eq contestType "stepItUp"}}
                        <div class="span6 activityAchieved">
                            <span class="goal"><strong>Goal:</strong> {{goal}}</span>
                            <span class="activity"><strong>Activity:</strong> {{progress}}</span>
                        </div>
                        <div class="span6 text-right">
                            <a class="btn btn-primary" href="{{creatorDetailPageUrl}}&id={{id}}">
                                {{#eq status "finalize_results"}}
                                    Final Results
                                {{else}}
                                    View Details
                                {{/eq}}
                            </a>
                        </div>
                    {{/eq}}
                    {{#eq contestType "doThisGetThat"}}
                        <div class="span12 text-right">
                            <a class="btn btn-primary" href="{{creatorDetailPageUrl}}&id={{id}}">
                                {{#eq status "finalize_results"}}
                                    Final Results
                                {{else}}
                                    View Details
                                {{/eq}}
                            </a>
                        </div>
                    {{/eq}}
                    {{#eq contestType "stackRank"}}
                        <div class="span6 activityAchieved">
                            <span><strong>Activity:</strong> {{progress}}</span>
                        </div>
                        <div class="span6 text-right">
                            <a class="btn btn-primary" href="{{creatorDetailPageUrl}}&id={{id}}">
                                {{#eq status "finalize_results"}}
                                    Final Results
                                {{else}}
                                    View Details
                                {{/eq}}
                            </a>
                        </div>
                        {{#if leader.firstName}}
                        <div class="span12 stackRankLeader">
                            {{#with leader}}
                                {{#ueq rank 0}}
                                <b>{{rank}}.</b>
                                <div class="avatarwrap">
                                    {{#if avatarUrl}}
                                        <img src="{{avatarUrl}}" class="listTileAvatar" alt="{{trimString firstName 0 1}}{{trimString lastName 0 1}}">
                                    {{else}}
                                        <span class="avatar-initials listTileAvatar">{{trimString firstName 0 1}}{{trimString lastName 0 1}}</span>
                                    {{/if}}
                                </div>
                                <span class="score">{{score}}</span>
                                <span class="leaderName">
                                    {{firstName}} {{lastName}}
                                </span>
                                {{/ueq}}
                            {{/with}}
                        </div>
                        {{/if}}
                    {{/eq}}
                </div>
            </li>
        {{/each}}
    </ul>
</div>
